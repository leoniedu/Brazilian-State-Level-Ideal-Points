model {
  scale <- max(sd(party),.000001)
  sdp <- 1000
  for (i in 1:n.rows) {
        yb[i] ~ dnorm(ilogit(xb[i]), tau.y)
   	xb[i] <- b0[legis[i]] + b1[legis[i]] * party[party.i[i]]
  }
  sigma.y ~ dunif(0,sdp)
  tau.y <- pow(sigma.y,-2)
  for (j in 1:n.party) {
    party[j] ~ dnorm(0, pow(sdp, -2))
    party.pp[j] <- (party[j]-mean(party))/scale
  } 	     
  for (j in 1:n.legis) {
    lr[j] ~ dnorm(party.j[j], tau.lr)
    b0[j] ~ dnorm(mu.0, tau.0)
    b1[j] ~ dnorm(mu.1, tau.1)
    b0.pp[j] <- b0[j] * scale + mean(party)/scale
    b1.pp[j] <- b1[j] * scale
  }
  sigma.0 ~ dunif(0, sdp)
  tau.0 <- pow(sigma.0,-2)
  sigma.lr ~ dunif(0, sdp)
  tau.lr <- pow(sigma.lr,-2)
  sigma.1 ~ dunif(0, sdp)
  tau.1 <- pow(sigma.1,-2)
  mu.0 ~ dnorm(0, pow(sdp, -2))
  mu.1 ~ dunif(0, sdp)
}


y <- a + b*x
b*x <- y - a
x <- (y - a)/b